<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Tauri</title>
	</head>

	<body>
		<h1>index.html</h1>
		<div><button id="baidu">baidu.com</button></div>
		<select id="route">
			<option value="secondary.html">secondary.html</option>
			<option value="nested/index.html">nested/index.html</option>
			<option value="nested/secondary.html">nested/secondary.html</option>
		</select>
		<button id="open-window">New window</button>
		<button id="go">Go</button>
		<a id="link" href="secondary.html">Go</a>
		<div><button onclick="__TAURI__.invoke('greet')">Open</button></div>
		<script src="index.js"></script>
		<script>
			(async function () {
				const f = function () {
					self.onmessage = ({ data, ...msg }) => {
						console.log("worker-onmessage:", data, msg);
						const src = "console.log(123);";
						const blob = new Blob([src], { type: "text/javascript" });
						const url = URL.createObjectURL(blob);
						import(url).then(console.log).catch(console.error);
						self.postMessage({ type: "FETCH_WASM" });
						self.close();
					};
				};
				const workerSrc = "(" + f.toString() + ")()";
				const workerBlob = new Blob([workerSrc], { type: "text/javascript" });
				const workerUrl = URL.createObjectURL(workerBlob);
				const worker = new Worker(workerUrl, { type: "module" });
				worker.onmessage = ({ data, ...msg }) => {
					console.log("main rcpt:", data);
					switch (data.type) {
						case "FETCH_WASM": {
							break;
						}
						default: {
							break;
						}
					}
				};
				worker.postMessage({ type: "hi", data: "from main to worker" });
				console.log("hi");
			})()
				.then(console.log)
				.catch(console.error);
			const src = "console.log(123,99999);";
			const blob = new Blob([src], { type: "text/javascript" });
			const url = URL.createObjectURL(blob);
			import(url).then(console.log).catch(console.error);
		</script>

		<div><a id="u3000.de" href="http://u3000.de/">Remote-Web-Chat</a></div>
		<div><a id="chat" href="chat.html">Tauri-Local-Chat</a></div>
	</body>
</html>
